<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/hover.css/2.1.1/css/hover-min.css" type="text/css" />
    <script src="https://kit.fontawesome.com/7443d15568.js" crossorigin="anonymous"></script>
    <title>Developers Nostalgia</title>

    <style>
        /*------------------------------------------------------------ GENERAL */
        
        a
        {
            color: #fafafa;
        }
        
        a:hover
        {
            text-decoration: none;
            color: #fff;
        }

        button
        {
            outline: none;
            border: none;
        }
        
        .flex-center 
        {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        
        /*------------------------------------------------------------ MAIN CONTAIENR */
        
        .main-cont 
        {
            width: 100vw;
            height: 100vh;
            background: #333;
        }
        
        
        /* ------------------------------------------------------------ NAVIGATION */
        
        /* BUTTON - Mobile Menu */
        .mobile-menu-btn
        {
            position: absolute;
            right: 5%;
            font-size: 2em;
            color: #fafafa;
            cursor: pointer;
            z-index: 999;
        }
        
        .nav-three-btns.just-visible-mobile
        {
            background: #333;
        }

        .mobile-menu-slider
        {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            color: #000 !important;
            width: 100%;
            min-height: 80px;
            background: #fafafa;
            transition: .3s;
/*            z-index: -1;*/
        }
        
        /* Mobile Menu - slides in */
        .mobile-menu-slider.menu-open
        {
            top: 73px;
            box-shadow: 0 5px 15px rgba(0,0,0,.5),
                        0 -10px #000;
        }
        
        .mobile-nav a
        {
            color: #000;
            font-size: .9em;
            font-weight: bolder;
            margin: .5em;
        }
        
        .nav-three-btns
        {
            position: absolute;
            top: 0;
            left: 0;
            height: 70px;
            width: 100%;
            padding-left: 5%;
            justify-content: flex-start;
            border-bottom: solid;
            padding-left: 0;
            z-index: 2;
        }
        
        /* HOVER - Navigation Links opacity 1 */
        .nav-three-btns:hover .nav a
        {
            color: rgba(255,255,255,1);
        }
        
        /* LOGO */
        
        .logo-home-link
        {
            position: absolute;
            width: 100%;
            height: 150%;
            background: transparent;
            z-index: 999999999;
        }
        
        .logo
        {
            position: relative;
            margin-right: .8em;
            font-size: 1.1em;
            font-weight: bolder;
            color: #000;
            color: #fafafa;
            cursor: pointer;
            text-shadow: .5px 0px 3px rgba(0,0,0,.3),
                         .5px 0px 3px rgba(0,0,0,.5);
            z-index: 2;
        }
        
        .logo:before
        {
            content: '';
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: darkred;
            background: rgba(139,0,0,.6);
            z-index: 1;
        }
        
        /* Navigation Links */
        .nav a
        {
            position: relative;
            margin: .5em;
            padding: .1em;
            color: #fafafa;
            color: rgba(255,255,255,.8);
            font-weight: bold;
        }
        
        /* Nav - Underline */
        .nav a:before
        {
            content: '';
            position: absolute;
            bottom: -25%;
            left: 50%;
            transform: translateX(-50%);
            width: 0%;
            height: 1px;
            background: crimson;
            transform-origin: center;
            transition: .3s;
        }
        
        /* HOVER - Underline */
        .nav:hover.nav a:before
        {
            width: 100%;
        }
        
        
        /* ------------------------------------------------------------ NAVIGATION FOR GAMES */
        
        #players-choice-checkbox
        {
            position: absolute;
            top: 30px;
            left: 335px;
            z-index: 9999;
        }
        
        #players-choice-checkbox.mobile
        {
            top: 107px;
            left:  45px;
            z-index: 9999 !important;
        }
        
        .games-nav
        {
            margin: 0;
            position: absolute;
            right: 5%;
        }
        
        /* Game nav - Underline */
        .games-nav .nav a:before
        {
            background: #fafafa;
        }
        
    
        /*------------------------------------------------------------ NAVIGATION FOR GAMES */
        
        .games-nav
        {
            margin: 0;
            position: absolute;
            right: 5%;
        }
        
        /* Game nav - Underline */
        .games-nav .nav a:before
        {
            background: #fafafa;
        }
        
    
        /*------------------------------------------------------------ TIC TAC TOE CONTAINER */

        .ttc-cont 
        {
            width: 500px;
            height: 500px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            grid-gap: .3em;
            background: #fff;
            box-shadow: 0 0 0 15px #fff;
        }

        /* Tic Tac Toe Squares */
        .ttc-square 
        {
            width: calc(500px/3 * .98);
            height: calc(500px/3 * .98);
            background: lightblue;
            background: black;
            cursor: pointer;
            transition: .3s;
        }
        
        /* HOVER - Tic Tac Toe Square */
        .ttc-square:hover
        {
            transform: scale(1.03);
            background: rgba(0,0,0,.9);
        }

        /* DISABLED - Tic Tac Toe Square */
        .ttc-square.disabled 
        {
            pointer-events: none;
        }

        
        /*------------------------------------------------------------ TIC TAC TOE ICONS/TOKENS */
        
/*        Circle/Pokeball Token */
        .circle 
        {
            position: relative;
            height: calc(500px/3 * .98 * .6);
            width: calc(500px/3 * .98 * .6);
            border-radius: 50%;
            border: solid 5px #fff;
        }
        
        .circle:before,
        .circle:after
        {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #fff;
        }
        
        .circle:before
        {
            width: 100%;
            height: 5px;
        }
        
        .circle:after
        {
            border-radius: 50%;
            width: 30%;
            height: 30%;
        }

        /* Cross Token */
        .cross 
        {
            position: relative;
            height: calc(500px/3 * .98 * .6);
            width: calc(500px/3 * .98 * .6);
            transform: scale(1.1);
        }

        .cross span 
        {
            position: absolute;
            top: 50%;
            transform: rotate(45deg);
            border: solid 8px #fff;
            width: calc(500px/3 * .98 * .6);
            background: #fff;
            border-radius: 5px;
        }

        .cross .second 
        {
            transform: rotate(-45deg);
        }

        /* Winning Row (green) */
        .winning-row 
        {
            background: green !important;
        }
        
        /*------------------------------------------------------------ START/MENU SCREEN */
        
        .menu-screen
        {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 2;
            background: #333;
            background: #000;
            width: 500px;
            height: 500px;
            flex-direction: column;
            display: none;
            transition: .5s ease;
        }
        
        /* Start Screen in-/visible */
        .menu-screen.visible
        {
            display: flex;
        }
        
        /* BUTTON - Start PokeTacToe Game */
        .start-ttc-game
        {
            margin-top: 1em;
            padding: 10px 15px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bolder;
            font-size: 1.2em;
            transition: .5s;
        }
        
        /* HOVER - Start Game Btn */
        .start-ttc-game:hover
        {
            background: #000;
            color: #fff;
            transform: scale(1.08);
        }
        
        /* Start Screen Headline  */
        .ttc-headline
        {
            position: relative;
            font-size: 3em;
            font-weight: bolder;
            color: #fafafa;
            margin-bottom: .8em;
        }
        
        /* Underline */
        .ttc-headline:before
        {
            content: '';
            position: absolute;
            bottom: -.3em;
            left: 50%;
            transform: translateX(-50%);
            width: 25%;
            height: 5px;
            background-color: #fff;
        }
        
        /* Txt declare winner */
        .winning-txt
        {
            font-size: 1.8em;
            font-weight: bold;
            color: aqua;
            margin-bottom: .5em;
        }
        
        /*  Label for Checkbox */
        label
        {
            font-weight: bolder;
            margin-bottom: 1em;
            color: #fafafa;
        }
        
        /* Checkbox for Random Player2 */
        input[type="checkbox"]
        {
            width: 25px;
            height: 25px;
            border: none;
            border-radius: 100px;
        }
        
        
        /*------------------------------------------------------------ SOCIAL MEDIA LINKS CONTAINER */
        
        .ttc-socials-cont
        {
            position: absolute;
            bottom: 0;
            padding-right: 5%;
            width: 100%;
            height: 80px;
            justify-content: flex-end;
            background: rgba(0,0,0,.5);
            transition: .3s;
        }
        
/*        HOVER - Social Media Container (bg, box-shadow) */
        .ttc-socials-cont:hover
        {
            background: #fafafa;
            box-shadow: -.1px -1px 15px rgba(0,0,0,.5);
        }
        
/*        HOVER - Social Media Circles (color, box-shadow) */
        .ttc-socials-cont:hover .social-contact
        {
            background: rgba(139,0,0,1);
            box-shadow: 1px 1px 15px rgba(0,0,0,.35);
            color: rgba(255,255,255,1);
        }
        
/*        HOVER - Footer Text (appear)*/
        .ttc-socials-cont:hover.ttc-socials-cont p
        {
            opacity: 1;
        }
        
/*        Footer Text */
        .ttc-socials-cont p
        {
            position: absolute;
            left: 5%;
            top: 50%;
            transform: translateY(-50%);
            font-weight: 700;
            font-size: 1.3em;
            font-size: 1.1em;
            color: #000;
            cursor: default;
            transition: .5s;
            opacity: 0;
        }
        
        /* Social Circles*/
        .social-contact 
        {
            position: relative;
            margin-left: 5px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #8B0000;
            background: rgba(139,0,0,.2);
            cursor: pointer;
            transition: .3s;
        }
        
        /* Social Circle - circle (0%) */
        .social-contact:before
        {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: #000;
            border-radius: 50%;
            width: 0;
            height: 0; 
            transition: .2s;
        }
        
        /* HOVER - Social Circle - circle (width 100%) */
        .social-contact:hover.social-contact:before
        {
            width: 100%;
            height: 100%;
        }
        
        /* Social Media Icons */
        .social-link
        {
            transition: .3s;
            z-index: 5;
        }
        
        /* HOVER - Social Media Icons*/
        .social-contact:hover .social-link
        {
            transform: scale(1.3);
        }
        
        
        /* ------------------------------------------------------------ BUTTON - Reload site */
        
        .reload-btn
        {
            position: absolute;
            top: -100%;
            left: 50%;
            color: #fff;
            width: 50px;
            opacity: .6;
            height: 50px;
            cursor: pointer;
            transition: .3s;
            font-size: 1.25em;
            border-radius: 50%;
            background: rgba(0,0,0,.5);
            transform: translateX(-50%);
        }
        
        .reload-btn:hover
        {
            opacity: 1;
            font-size: 1.4em;
        }
        
        
        /*------------------------------------------------------------ MEDIA QUERIES */
        
        /* Mobile */
        @media only screen and (max-width: 576px) 
        {
            .menu-screen,
            .ttc-cont
            {
                transform: scale(.65);
            }
            
            .menu-screen
            {
                transform: translate(-50%, -50%) scale(.65);
            }
        }
        
    </style>

        
</head>

<body>

   <!-- Main Container -->
   <div class="main-cont flex-center">
       <!-- Start/Menu Screen -->
       <div class="menu-screen visible flex-center">
           <h1 class="ttc-headline">PokeTacToe</h1>
          <!-- Text for declaring Winner -->
           <p class="winning-txt"></p>
          <!-- Checkbox for Random Player -->
          <label for="random-pl-checkbox">Random Player On/Off</label>
          <input type="checkbox" id="random-pl-checkbox" name="random-pl-checkbox">
           <!-- BUTTON - Start PokeTakToe Game -->
           <button class="start-ttc-game">Start Game</button>
       </div>
       <header>
           <!-- Navigation -->
           <nav class="nav-three-btns flex-center not-visible-mobile">
            <ul class="flex-center" style="margin: 0">
                <div class="logo flex-center">
                    <a href="pokemile_about.html" class="logo-home-link"></a>
                    <span class="logo-span" style="z-index: 3">&#128187DN</span>
                </div>
                <li class="nav"><a href="#">Home</a></li>
                <li class="nav"><a href="#">Pokedex</a></li>
                <li class="nav"><a href="#">Games</a></li>
            </ul>
            <!-- Games Navigation -->
            <ul class="flex-center games-nav" style="margin: 0">                
                <li class="nav"><a href="#">PokeTacToe</a></li>
                <li class="nav"><a href="#">PokeLights</a></li>
                <li class="nav"><a href="#">PokeQuiz</a></li>
            </ul>
        </nav> 
       <!-- Mobile Navigation (invisible if not Mobile) -->
           <nav class="nav-three-btns just-visible-mobile flex-center">
              <ul class="flex-center" style="margin: 0; padding-left: 0; margin-left: 5%">
                    <div class="logo flex-center">
                        <a href="pokemile_about.html" class="logo-home-link"></a>
                        <span class="logo-span" style="z-index: 3">&#128187DN</span>
                    </div>
                    <li class="nav"><a href="#">Home</a></li>
                    <li class="nav"><a href="#">Pokedex</a></li>
                    <li class="nav"><a href="#">Games</a></li>
                </ul>
                <div onclick="toggleMobileMenu()" class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </div>
           </nav>
           <div class="mobile-menu-slider just-visible-mobile">
                <div class="flex-center games-nav" style="margin: 0; height: 100%">
                    <div class="mobile-nav"><a href="#">PokeTacToe</a></div>
                    <div class="mobile-nav"><a href="#">PokeLights</a></div>
                    <div class="mobile-nav"><a href="#">PokeQuiz</a></div>
                </div>
            </div>
       </header>
        <!-- PokeTakToe Game Field  & Squares -->
        <div class="ttc-cont flex-center">
            <div class="ttc-square flex-center" data-square="1"></div>
            <div class="ttc-square flex-center" data-square="2"></div>
            <div class="ttc-square flex-center" data-square="3"></div>
            <div class="ttc-square flex-center" data-square="4"></div>
            <div class="ttc-square flex-center" data-square="5"></div>
            <div class="ttc-square flex-center" data-square="6"></div>
            <div class="ttc-square flex-center" data-square="7"></div>
            <div class="ttc-square flex-center" data-square="8"></div>
            <div class="ttc-square flex-center" data-square="9"></div>
        </div>
        <!-- Social Media Container (Footer) -->
        <div class="ttc-socials-cont flex-center">
           <button onclick="reloadSite()" class="reload-btn"><i class="fas fa-sync-alt"></i></button>
           <p><i class="fas fa-hashtag"></i> Follow me</p>
           <p style="left: 20%;"><i class="fas fa-laptop-code"></i> Code with me</p>
            <!-- Social Media Circles - Links -->
            <div class="flex-center">
                <div class="social-contact flex-center">
                    <a class="social-link" href="http://wwww.facebook.com" target="_blank">
                        <i class="social-fab fab fa-facebook-f"></i>
                    </a>
                </div>
                <div class="social-contact flex-center">
                    <a class="social-link" href="http://wwww.instagram.com" target="_blank">
                        <i class="social-fab fab fa-instagram"></i>
                    </a>
                </div>
                <div class="social-contact flex-center">
                    <a class="social-link" href="http://wwww.twitter.com" target="_blank">
                        <i class="social-fab fab fa-twitter"></i>
                    </a>
                </div>
                <div class="social-contact flex-center">
                    <a class="social-link" href="http://wwww.youtube.com" target="_blank">
                        <i class="social-fab fab fa-youtube"></i>
                    </a>
                </div>
                <div class="social-contact flex-center">
                    <a class="social-link" href="http://wwww.pinterest.com" target="_blank">
                        <i class="social-fab fab fa-pinterest-p"></i>
                    </a>
                </div>
                <div class="social-contact flex-center">
                    <a class="social-link" href="http://wwww.linkedin.com" target="_blank">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>


    <script>
        
        // ------------------------------------------------------------------ VARIABLES
        
        const startButtonGame = document.querySelector(".start-ttc-game");
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const mobileMenu = document.querySelector('.mobile-menu-slider');
        const allSquares = document.querySelectorAll(".ttc-square");
        const allSquaresArray = [...allSquares];

        let menuScreen = document.querySelector(".menu-screen");
        let winningTxt = document.querySelector(".winning-txt");
        let randomPlayerCheckbox = document.querySelector("#random-pl-checkbox");
        
        let menuOpen = false;
        let turnPlayerOne = true;
        let randomPlayerOn = true;

        
        // ------------------------------------------------------------------ TOGGLE FUNCTIONS
        
        // Toggles Mobile Menu & Checkbox
        const toggleMobileMenu = () => {
            menuOpen ? menuOpen = false : menuOpen = true;
            menuOpen ? mobileMenuBtn.innerHTML = `<i class="fas fa-times"></i>` : mobileMenuBtn.innerHTML = `<i class="fas fa-bars"></i>`;
            menuOpen ? mobileMenu.classList.add("menu-open") : mobileMenu.classList.remove("menu-open");
        }
        
        
        // ------------------------------------------------------------------ EVENT LISTENERS
        
        startButtonGame.addEventListener("click", startTtcGame);
        allSquaresArray.forEach(s => s.addEventListener('click', setMark));

        
        // ------------------------------------------------------------------ RE-/START POKETACTOE GAME

        // Restarts - Ampel Game
        function reloadSite() {
            location.reload();
        }
        
        
        // Starts PokeTakToe Game, determits randomPlayer, sets up field
        function startTtcGame() {
            turnPlayerOne = true;
            // checks if checkbox for random pl - checked
            randomPlayerOn = randomPlayerCheckbox.checked ? true : false;
            allSquaresArray.map(sa => {
                sa.innerHTML = "";
                sa.classList.remove("p1", "p2", "disabled");
            });
            menuScreen.classList.remove("visible");
        }
        
        
        // Sets a Circle or a Cross and checks if some of the players won
        function setMark(e) {
            // RANDOM Computer Move - Sets a random cross on an empty field
            function randomPlayerMove() {
                // takes all empty squares and selects a random one
                let allEmptySquares = [...allSquares].filter(s => s.innerHTML === "");
                let targetedEmptySquare = allEmptySquares[Math.floor(Math.random() * allEmptySquares.length)]
                // checkIfAllSquaresActive(allSquaresArray);
                
                if (allEmptySquares.length > 0) {
                    // inserts cross
                    targetedEmptySquare.insertAdjacentHTML("beforeend", `
                        <div class="cross">
                            <span></span>
                            <span class="second"></span>
                        </div>
                    `);

                    targetedEmptySquare.classList.add("disabled", "p2");
                    // checks if any player won this turn
                    checkIfAllSquaresActive(allSquaresArray);
                    if (checkForWin("p2")) {
                        winner = "p2";
                        winningTxt.innerText = "Player2 Wins!"
                        gameOver();
                    } else if (checkForWin("p1")) {
                        winningTxt.innerText = "Player1 Wins!"
                        gameOver();
                    }
                } else {
                    checkIfAllSquaresActive(allSquaresArray);
                }
                turnPlayerOne = true;
            }

            
            // P1
            if (e.target.innerHTML === "" && turnPlayerOne) {
                e.target.insertAdjacentHTML("beforeend", `
                    <div class="circle"></div>
                `);
                turnPlayerOne = false;
                e.target.classList.add("disabled", "p1");
                if (checkForWin("p1")) {
                    winner = "p1";
                    winningTxt.innerText = "Player1 Wins!"
                    gameOver();
                } else if (randomPlayerOn) {
                    setTimeout(randomPlayerMove, 500);
                }
            // P2   
            } else if (e.target.innerHTML === '' && !turnPlayerOne) {
                e.target.insertAdjacentHTML("beforeend", `
                    <div class="cross">
                        <span></span>
                        <span class="second"></span>
                    </div>
                `);
                turnPlayerOne = true;
                
                e.target.classList.add("disabled", "p2");
                if (checkForWin("p2")) {
                    winner = "p2";
                    winningTxt.innerText = "Player2 Wins!"
                    gameOver();
                }
                checkIfAllSquaresActive(allSquaresArray);
            }
        }
      
        
        // ------------------------------------------------------------------ DECLARE WINNER & FINISH GAME

        // Checks if all aquares are filled and finishes the game
        function checkIfAllSquaresActive(arr) {
            let filteredSquareArray = arr.filter(s => s.innerHTML === "");

            if (filteredSquareArray.length === 0) {
                winningTxt.innerText = "Draw";
                gameOver();
            }
        }


        // Finishes the game
        function gameOver() {
            allSquaresArray.map(sa => sa.classList.add('disabled'));
            setTimeout(() => menuScreen.classList.add("visible"), 1000);
        }

        
        // ------------------------------------------------------------------ CHECK FIELD FOR WINNING ROW

        // Creates a 3d-array of squares
        function createNestedArrays(arr) {
            let allSortedArrays = [];
            let firstArray = arr.filter(s => parseInt(s.dataset.square) < 4);
            let secondArray = arr.filter(s => parseInt(s.dataset.square) > 3 && parseInt(s.dataset.square) < 7);
            let thirdArray = arr.filter(s => parseInt(s.dataset.square) > 6 && parseInt(s.dataset.square) < 10);

            allSortedArrays.push(firstArray, secondArray, thirdArray);
            return allSortedArrays;
        }

        
        // Checks if some of the players win
        function checkForWin(player) {
            let normalArray = [...document.querySelectorAll(".ttc-square")];
            let nestedArrays = createNestedArrays([...document.querySelectorAll(".ttc-square")]);
            // returns boolean
            return (checkForHorizontalWin(nestedArrays, player) ||
                    checkForVerticalWin(nestedArrays, player) || 
                    checkForDiagonalWin(normalArray, player));
        }
            

        // Takes p1/p2 as input and checks for Horizontal win
        function checkForHorizontalWin(nSquares, playerMark) {
            let verticalTrue = false;
            nSquares.forEach(na => {
                if (na.every(ne => ne.classList.contains(playerMark))) {
                    verticalTrue = true;
                }
            });
            return verticalTrue;
        }


        // Takes p1/p2 as input and checks for Vertical win
        function checkForVerticalWin(nSquares, playerMark) {
            for (let i = 0; i < nSquares.length; i++) {
                if (nSquares.every(e => e[i].classList.contains(playerMark))) {
                    return true;
                    // try to give green classes!
                }
            }
            return false;
        }


        // Takes p1/p2 as input and checks for Diagonal win
        function checkForDiagonalWin(arr, playerMark) {
            if (arr[0].classList.contains(playerMark) &&
                arr[4].classList.contains(playerMark) &&
                arr[8].classList.contains(playerMark)) {
                return true;
            } else if (arr[2].classList.contains(playerMark) &&
                arr[4].classList.contains(playerMark) &&
                arr[6].classList.contains(playerMark)) {
                return true;
            } else {
                return false;
            }
        }

        
        
        
        
        // BUG - Random Player 

    </script>

</body></html>
